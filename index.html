<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>Ember Ascent</title><script src="https://cdn.jsdelivr.net/npm/tone@15.1.22/dist/Tone.js"></script><style>@import url(https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap);*{margin:0;padding:0;box-sizing:border-box}body{overflow:hidden;background:#0a0a0a;font-family:Rajdhani,sans-serif;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}#game-canvas{position:fixed;top:0;left:0;width:100%;height:100%;touch-action:none}#ui-layer{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:100}#start-screen{position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(ellipse at center bottom,rgba(255,100,0,.15) 0%,transparent 70%);display:flex;flex-direction:column;justify-content:center;align-items:center;pointer-events:auto;transition:opacity .8s ease}#start-screen.hidden{opacity:0;pointer-events:none}#start-screen h1{font-family:Cinzel,serif;font-size:clamp(2rem,10vw,4rem);color:#ff6b35;text-shadow:0 0 30px #ff4500,0 0 60px #ff2200,0 0 90px #aa0000;letter-spacing:.3em;opacity:0;animation:titleReveal 2s ease forwards .5s}@keyframes titleReveal{0%{opacity:0;letter-spacing:.8em;transform:translateY(20px)}100%{opacity:1;letter-spacing:.3em;transform:translateY(0)}}#start-screen .tagline{font-size:clamp(.9rem,4vw,1.2rem);color:#ffaa66;margin-top:1rem;opacity:0;animation:fadeIn 1.5s ease forwards 1.5s}#start-screen .instructions{font-size:clamp(.8rem,3vw,1rem);color:rgba(255,200,150,.7);margin-top:2rem;text-align:center;padding:0 2rem;line-height:1.8;opacity:0;animation:fadeIn 1.5s ease forwards 2s}#start-screen .tap-start{margin-top:3rem;padding:1rem 3rem;font-family:Rajdhani,sans-serif;font-size:1.2rem;font-weight:700;color:#0a0a0a;background:linear-gradient(135deg,#ff6b35,#ffaa00);border:none;border-radius:50px;cursor:pointer;opacity:0;animation:fadeIn 1s ease forwards 2.5s,pulse 2s ease-in-out infinite 3.5s}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}100%{opacity:1;transform:translateY(0)}}@keyframes pulse{0%,100%{box-shadow:0 0 20px rgba(255,107,53,.5)}50%{box-shadow:0 0 40px rgba(255,107,53,.8)}}#game-ui{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;transition:opacity .5s ease}#game-ui.visible{opacity:1}#level-indicator{position:absolute;top:20px;left:50%;transform:translateX(-50%);font-size:clamp(.9rem,4vw,1.1rem);font-weight:500;color:#ffaa66;text-shadow:0 0 10px rgba(255,100,0,.5);letter-spacing:.1em}#fuel-bar-container{position:absolute;top:50px;left:50%;transform:translateX(-50%);width:60%;max-width:300px;height:12px;background:rgba(20,20,20,.8);border-radius:6px;overflow:hidden;border:1px solid rgba(255,100,0,.3)}#fuel-bar{width:100%;height:100%;background:linear-gradient(90deg,#ff2200,#ff6b35,#ffaa00);border-radius:6px;transition:width .3s ease;box-shadow:0 0 15px rgba(255,100,0,.6)}#fuel-label{position:absolute;top:68px;left:50%;transform:translateX(-50%);font-size:.7rem;color:rgba(255,170,102,.7);letter-spacing:.15em}#score-display{position:absolute;top:20px;right:20px;font-size:clamp(1rem,5vw,1.5rem);font-weight:700;color:#ffcc00;text-shadow:0 0 10px rgba(255,200,0,.5)}#height-display{position:absolute;top:90px;left:50%;transform:translateX(-50%);font-size:clamp(.8rem,3.5vw,1rem);color:rgba(255,200,150,.6)}#game-over-screen,#level-complete-screen{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:rgba(10,10,10,.9);opacity:0;pointer-events:none;transition:opacity .5s ease}#game-over-screen.visible,#level-complete-screen.visible{opacity:1;pointer-events:auto}#game-over-screen h2{font-family:Cinzel,serif;font-size:clamp(1.5rem,8vw,3rem);color:#ff3300;text-shadow:0 0 20px #f00;margin-bottom:1rem}#game-over-screen .final-score{font-size:clamp(1rem,5vw,1.5rem);color:#ffaa66;margin-bottom:2rem}#level-complete-screen h2{font-family:Cinzel,serif;font-size:clamp(1.5rem,8vw,3rem);color:#fcc;text-shadow:0 0 20px #f90;margin-bottom:1rem}#level-complete-screen .level-score{font-size:clamp(1rem,5vw,1.5rem);color:#ffaa66;margin-bottom:2rem}.action-btn{padding:1rem 2.5rem;font-family:Rajdhani,sans-serif;font-size:1.1rem;font-weight:700;color:#0a0a0a;background:linear-gradient(135deg,#ff6b35,#ffaa00);border:none;border-radius:50px;cursor:pointer}#flash-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:#fff;opacity:0;pointer-events:none;z-index:200}#flash-overlay.flash{animation:flashAnim .5s ease}@keyframes flashAnim{0%{opacity:.8}100%{opacity:0}}#vignette{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:50;transition:box-shadow .3s ease}#vignette.danger{box-shadow:inset 0 0 100px rgba(255,0,0,.4)}.floating-text{position:absolute;font-weight:700;pointer-events:none;animation:floatUp 1s ease forwards;z-index:150}@keyframes floatUp{0%{opacity:1;transform:translateY(0) scale(1)}100%{opacity:0;transform:translateY(-50px) scale(1.2)}}.floating-text.positive{color:#fc0;text-shadow:0 0 10px #f90}.floating-text.negative{color:#f30;text-shadow:0 0 10px #f00}#github-link{position:fixed;bottom:10px;right:10px;font-family:monospace;font-size:.75rem;color:rgba(255,255,255,.4);text-decoration:none;z-index:1000}#win-screen{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:radial-gradient(ellipse at center,rgba(255,150,0,.3) 0%,rgba(10,10,10,.95) 70%);opacity:0;pointer-events:none;transition:opacity .8s ease}#win-screen.visible{opacity:1;pointer-events:auto}#win-screen h2{font-family:Cinzel,serif;font-size:clamp(1.8rem,10vw,4rem);color:#fcc;text-shadow:0 0 30px #f90,0 0 60px #f60;animation:winGlow 2s ease-in-out infinite}@keyframes winGlow{0%,100%{text-shadow:0 0 30px #f90,0 0 60px #f60}50%{text-shadow:0 0 50px #fc0,0 0 100px #f90,0 0 150px #f60}}#win-screen .final-message{font-size:clamp(1rem,5vw,1.5rem);color:#ffaa66;margin-top:1rem}</style></head><body><canvas id="game-canvas"></canvas><div id="ui-layer"><div id="start-screen"><h1>EMBER ASCENT</h1><p class="tagline">Rise. Burn. Ascend.</p><p class="instructions">Tap to leap between branches<br>Collect ember sparks to fuel your flame<br>Dodge the falling rain</p><button class="tap-start" id="start-btn">IGNITE</button></div><div id="game-ui"><div id="level-indicator">LEVEL 1 / 5 — SAPLING</div><div id="fuel-bar-container"><div id="fuel-bar"></div></div><div id="fuel-label">FLAME</div><div id="score-display">0</div><div id="height-display">Height: 0m</div></div><div id="game-over-screen"><h2>FLAME EXTINGUISHED</h2><p class="final-score">Score: <span id="final-score">0</span></p><button class="action-btn" id="retry-btn">REIGNITE</button></div><div id="level-complete-screen"><h2>LEVEL COMPLETE</h2><p class="level-score">Score: <span id="level-score">0</span></p><button class="action-btn" id="next-level-btn">ASCEND</button></div><div id="win-screen"><h2>THE CROWN</h2><p class="final-message">You have reached the top. The flame burns eternal.</p><button class="action-btn" id="play-again-btn" style="margin-top:2rem;">PLAY AGAIN</button></div></div><div id="flash-overlay"></div><div id="vignette"></div><a id="github-link" href="https://github.com/nishivector/ember-ascent" target="_blank">GitHub</a><script type="importmap">{"imports":{"three":"https://cdn.jsdelivr.net/npm/three@0.183.0/build/three.module.js","three/addons/":"https://cdn.jsdelivr.net/npm/three@0.183.0/examples/jsm/"}}</script><script type="module">
import*as THREE from'three';const LEVELS=[{name:'SAPLING',height:100,rainChance:.003,emberChance:.008,speed:1,branches:8},{name:'YOUNG TREE',height:200,rainChance:.005,emberChance:.006,speed:1.2,branches:10},{name:'OLD OAK',height:350,rainChance:.007,emberChance:.005,speed:1.4,branches:12},{name:'ANCIENT GROVE',height:550,rainChance:.01,emberChance:.004,speed:1.7,branches:15},{name:'THE CROWN',height:800,rainChance:.015,emberChance:.003,speed:2,branches:18}];let currentLevel=0,fuel=100,score=0,height=0,gameRunning=false,player=null;let branches=[],embers=[],raindrops=[],particles=[],bgVelocities=[];let musicStarted=false,bpm=80,synth,polySynth,membraneSynth;const canvas=document.getElementById('game-canvas'),renderer=new THREE.WebGLRenderer({canvas,antialias:true,alpha:true});renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));renderer.setSize(window.innerWidth,window.innerHeight);renderer.setClearColor(0x0a0a0a);const scene=new THREE.Scene();scene.fog=new THREE.FogExp2(0x0a0a0a,.015);let camera=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,1000);camera.position.set(0,5,15);function updateCamera(){const aspect=window.innerWidth/window.innerHeight;if(aspect<1){camera.fov=70;camera.position.set(0,5,18)}else{camera.fov=60;camera.position.set(0,5,15)}camera.updateProjectionMatrix()}updateCamera();scene.add(new THREE.AmbientLight(0x331100,.3));const fireLight=new THREE.PointLight(0xff4400,2,20);scene.add(fireLight);const rimLight=new THREE.DirectionalLight(0xff6600,.5);rimLight.position.set(5,10,5);scene.add(rimLight);const bgParticleCount=200,bgGeometry=new THREE.BufferGeometry(),bgPositions=new Float32Array(bgParticleCount*3);for(let i=0;i<bgParticleCount;i++){bgPositions[i*3]=(Math.random()-.5)*30;bgPositions[i*3+1]=Math.random()*100-20;bgPositions[i*3+2]=(Math.random()-.5)*20-5;bgVelocities.push({x:(Math.random()-.5)*.02,y:Math.random()*.05+.02,z:(Math.random()-.5)*.01})}bgGeometry.setAttribute('position',new THREE.BufferAttribute(bgPositions,3));const bgParticles=new THREE.Points(bgGeometry,new THREE.PointsMaterial({color:0xff4400,size:.1,transparent:true,opacity:.6,blending:THREE.AdditiveBlending}));scene.add(bgParticles);function createPlayer(){const group=new THREE.Group();group.add(new THREE.Mesh(new THREE.SphereGeometry(.3,16,16),new THREE.MeshBasicMaterial({color:0xffffff})));group.add(new THREE.Mesh(new THREE.SphereGeometry(.45,16,16),new THREE.MeshBasicMaterial({color:0xff6600,transparent:true,opacity:.8})));group.add(new THREE.Mesh(new THREE.SphereGeometry(.6,16,16),new THREE.MeshBasicMaterial({color:0xff2200,transparent:true,opacity:.5})));group.add(new THREE.Mesh(new THREE.SphereGeometry(.8,16,16),new THREE.MeshBasicMaterial({color:0xff4400,transparent:true,opacity:.2,blending:THREE.AdditiveBlending})));group.userData={phase:0,jumping:false};return group}player=createPlayer();player.position.set(0,0,0);scene.add(player);function createBranch(y){const group=new THREE.Group(),width=3+Math.random()*2,thickness=.15+Math.random()*.1;const branch=new THREE.Mesh(new THREE.CylinderGeometry(thickness,thickness*1.2,width,8),new THREE.MeshStandardMaterial({color:0x3d2817,emissive:0x1a0a00,emissiveIntensity:.3,roughness:.9}));branch.rotation.z=Math.PI/2;group.add(branch);for(let i=0;i<Math.floor(Math.random()*3)+1;i++){const spot=new THREE.Mesh(new THREE.SphereGeometry(.08,8,8),new THREE.MeshBasicMaterial({color:0xff4400}));spot.position.set((Math.random()-.5)*width*.8,0,thickness+.05);group.add(spot)}group.position.set((Math.random()-.5)*10,y,0);group.userData={y,phase:Math.random()*Math.PI*2};return group}function createEmber(y){const ember=new THREE.Mesh(new THREE.SphereGeometry(.15,8,8),new THREE.MeshBasicMaterial({color:0xffaa00,transparent:true,opacity:.9}));ember.add(new THREE.Mesh(new THREE.SphereGeometry(.25,8,8),new THREE.MeshBasicMaterial({color:0xff6600,transparent:true,opacity:.3,blending:THREE.AdditiveBlending})));ember.position.set((Math.random()-.5)*12,y,0);ember.userData={collected:false};return ember}function createRaindrop(y){const drop=new THREE.Mesh(new THREE.SphereGeometry(.12,8,8),new THREE.MeshBasicMaterial({color:0x4488ff,transparent:true,opacity:.7}));const trail=new THREE.Mesh(new THREE.CylinderGeometry(.02,.06,.4,4),new THREE.MeshBasicMaterial({color:0x6699ff,transparent:true,opacity:.4}));trail.position.y=-.3;drop.add(trail);drop.position.set((Math.random()-.5)*14,y,0);return drop}function spawnParticles(pos,color,count){for(let i=0;i<count;i++){const angle=Math.random()*Math.PI*2,speed=.05+Math.random()*.1;p=new THREE.Mesh(new THREE.SphereGeometry(.05+Math.random()*.05,6,6),new THREE.MeshBasicMaterial({color:color,transparent:true,opacity:1}));p.position.copy(pos);p.userData={vx:Math.cos(angle)*speed,vy:Math.sin(angle)*speed+.05,vz:(Math.random()-.5)*speed,life:1,decay:.02+Math.random()*.02};scene.add(p);particles.push(p)}}function showFloatingText(text,x,y,positive){const div=document.createElement('div');div.className='floating-text '+(positive?'positive':'negative');div.textContent=text;div.style.left=x+'px';div.style.top=y+'px';div.style.fontSize=(1.2+Math.random()*.5)+'rem';document.getElementById('ui-layer').appendChild(div);setTimeout(function(){div.remove()},1000)}async function initAudio(){try{await Tone.start();synth=new Tone.Synth({oscillator:{type:'triangle'},envelope:{attack:.01,decay:.1,sustain:.1,release:.2}}).toDestination();synth.volume.value=-28;polySynth=new Tone.PolySynth(Tone.Synth,{oscillator:{type:'square'},envelope:{attack:.02,decay:.2,sustain:.2,release:.3}}).toDestination();polySynth.volume.value=-24;membraneSynth=new Tone.MembraneSynth({pitchDecay:.05,octaves:4,oscillator:{type:'sine'},envelope:{attack:.001,decay:.4,sustain:.01,release:.4}}).toDestination();membraneSynth.volume.value=-20;setupMusic()}catch(e){console.log('Audio not available')}}function setupMusic(){if(!Tone.Transport)return;const melody=[{time:'0:0',note:'C3',dur:'8n'},{time:'0:1',note:'E3',dur:'8n'},{time:'0:2',note:'G3',dur:'8n'},{time:'0:3',note:'B3',dur:'8n'},{time:'1:0',note:'C4',dur:'4n'},{time:'1:2',note:'B3',dur:'8n'},{time:'1:3',note:'G3',dur:'8n'},{time:'2:0',note:'E3',dur:'8n'},{time:'2:1',note:'G3',dur:'8n'},{time:'2:2',note:'C4',dur:'4n'},{time:'3:0',note:'B3',dur:'4n'},{time:'3:2',note:'C4',dur:'4n'}];const part=new Tone.Part(function(t,v){try{polySynth.triggerAttackRelease(v.note,v.dur,t)}catch(e){}},melody);part.loop=true;part.loopEnd='4:0';Tone.Transport.bpm.value=bpm;Tone.Transport.start();part.start(0)}function playJumpSound(){try{if(synth)synth.triggerAttackRelease('C5','32n')}catch(e){}}function playCollectSound(){try{if(synth){synth.triggerAttackRelease('G5','16n');setTimeout(function(){synth.triggerAttackRelease('C6','16n')},50)}}catch(e){}}function playHitSound(){try{if(membraneSynth)membraneSynth.triggerAttackRelease('C1','8n')}catch(e){}}function playLevelComplete(){try{if(polySynth){polySynth.triggerAttackRelease(['C4','E4','G4','C5'],'8n');setTimeout(function(){polySynth.triggerAttackRelease(['E4','G4','C5','E5'],'8n')},150);setTimeout(function(){polySynth.triggerAttackRelease(['G4','C5','E5','G5'],'4n')},300)}}catch(e){}}function startGame(){if(!musicStarted){initAudio();musicStarted=true}currentLevel=0;fuel=100;score=0;height=0;gameRunning=true;branches.forEach(function(b){scene.remove(b)});embers.forEach(function(e){scene.remove(e)});raindrops.forEach(function(r){scene.remove(r)});branches=[];embers=[];raindrops=[];const level=LEVELS[currentLevel];for(let i=0;i<level.branches;i++){const b=createBranch(i*8-5);branches.push(b);scene.add(b)}player.position.set(0,0,0);player.userData.jumping=false;updateUI();document.getElementById('start-screen').classList.add('hidden');document.getElementById('game-ui').classList.add('visible');document.getElementById('game-over-screen').classList.remove('visible');document.getElementById('level-complete-screen').classList.remove('visible');document.getElementById('win-screen').classList.remove('visible');if(Tone.Transport)Tone.Transport.bpm.rampTo(bpm+currentLevel*20,1)}function updateUI(){const level=LEVELS[currentLevel];document.getElementById('level-indicator').textContent='LEVEL '+(currentLevel+1)+' / 5 — '+level.name;document.getElementById('fuel-bar').style.width=fuel+'%';document.getElementById('score-display').textContent=score;document.getElementById('height-display').textContent='Height: '+Math.floor(height)+'m'}function jump(){if(!gameRunning||player.userData.jumping)return;let nearest=null,nearestDist=Infinity;branches.forEach(function(b){if(b.position.y>player.position.y){const d=b.position.y-player.position.y;if(d<nearestDist&&d<8){nearestDist=d;nearest=b}}});if(nearest){player.userData.jumping=true;playJumpSound();moveToBranch(nearest)}}function moveToBranch(branch){const tx=branch.position.x,ty=branch.position.y+1,sx=player.position.x,sy=player.position.y,dur=500,st=Date.now();function anim(){const el=Date.now()-st,p=Math.min(el/dur,1),e=1-Math.pow(1-p,3);player.position.x=sx+(tx-sx)*e;player.position.y=sy+(ty-sy)*e+Math.sin(p*Math.PI)*2;if(p<1)requestAnimationFrame(anim);else{player.userData.jumping=false;height=player.position.y;checkLevelComplete();checkEmberCollection()}}anim()}function checkEmberCollection(){embers.forEach(function(e){if(e.userData.collected)return;if(player.position.distanceTo(e.position)<1.5){e.userData.collected=true;score+=50;fuel=Math.min(100,fuel+15);spawnParticles(e.position.clone(),0xffaa00,20);playCollectSound();const sp=e.position.clone().project(camera);showFloatingText('+50',(sp.x*.5+.5)*window.innerWidth,(1-(sp.y*.5+.5))*window.innerHeight,true)}})}function checkLevelComplete(){const level=LEVELS[currentLevel];if(height>=level.height){gameRunning=false;if(currentLevel>=4){document.getElementById('flash-overlay').classList.add('flash');playLevelComplete();setTimeout(function(){document.getElementById('game-ui').classList.remove('visible');document.getElementById('win-screen').classList.add('visible')},500)}else{playLevelComplete();document.getElementById('flash-overlay').classList.add('flash');setTimeout(function(){document.getElementById('level-score').textContent=score;document.getElementById('game-ui').classList.remove('visible');document.getElementById('level-complete-screen').classList.add('visible')},500)}}}function nextLevel(){currentLevel++;fuel=100;const level=LEVELS[currentLevel];branches.forEach(function(b){scene.remove(b)});branches=[];for(let i=0;i<level.branches;i++){const b=createBranch(i*8-5);branches.push(b);scene.add(b)}player.position.set(0,0,0);height=0;document.getElementById('level-complete-screen').classList.remove('visible');document.getElementById('game-ui').classList.add('visible');if(Tone.Transport)Tone.Transport.bpm.rampTo(bpm+currentLevel*20,1);updateUI();gameRunning=true}function gameOver(){gameRunning=false;playHitSound();document.getElementById('vignette').classList.add('danger');setTimeout(function(){document.getElementById('final-score').textContent=score;document.getElementById('game-ui').classList.remove('visible');document.getElementById('game-over-screen').classList.add('visible');document.getElementById('vignette').classList.remove('danger')},1000)}document.getElementById('start-btn').addEventListener('click',startGame);document.getElementById('retry-btn').addEventListener('click',startGame);document.getElementById('next-level-btn').addEventListener('click',nextLevel);document.getElementById('play-again-btn').addEventListener('click',startGame);canvas.addEventListener('pointerdown',function(e){if(gameRunning)jump()});window.addEventListener('resize',function(){renderer.setSize(window.innerWidth,window.innerHeight);updateCamera()});function animate(){requestAnimationFrame(animate);const delta=clock.getDelta();const time=clock.getElapsedTime();if(player){player.userData.phase+=delta*3;player.scale.setScalar(1+Math.sin(player.userData.phase)*.1);player.children[1].scale.y=1+Math.sin(player.userData.phase*1.5)*.2;fireLight.position.copy(player.position);fireLight.intensity=2+Math.sin(time*5)*.5}const pos=bgParticles.geometry.attributes.position.array;for(let i=0;i<bgParticleCount;i++){pos[i*3]+=bgVelocities[i].x;pos[i*3+1]+=bgVelocities[i].y;pos[i*3+2]+=bgVelocities[i].z;if(pos[i*3+1]>50){pos[i*3+1]=-20;pos[i*3]=(Math.random()-.5)*30}}bgParticles.geometry.attributes.position.needsUpdate=true;if(gameRunning&&player){camera.position.y=THREE.MathUtils.lerp(camera.position.y,player.position.y+5,.05)}if(gameRunning){const level=LEVELS[currentLevel];if(Math.random()<level.emberChance){const e=createEmber(player.position.y+20+Math.random()*10);embers.push(e);scene.add(e)}if(Math.random()<level.rainChance){const r=createRaindrop(player.position.y+25+Math.random()*10);raindrops.push(r);scene.add(r)}embers.forEach(function(e,i){if(e.position.y<player.position.y-10){scene.remove(e);embers.splice(i,1)}else if(!e.userData.collected){e.position.y+=Math.sin(time*2+e.userData.phase)*.01}});raindrops.forEach(function(r,i){r.position.y-=level.speed*.15;if(r.position.y<player.position.y-10){scene.remove(r);raindrops.splice(i,1)}else if(player.position.distanceTo(r.position)<1){fuel-=20;scene.remove(r);raindrops.splice(i,1);spawnParticles(player.position.clone(),0x4488ff,10);playHitSound();showFloatingText('-20',window.innerWidth/2,window.innerHeight/2,false);if(fuel<=0)gameOver()}});fuel-=.05;if(fuel<=0)gameOver();updateUI()}renderer.render(scene,camera)}const clock=new THREE.Clock();animate();
</script></body></html>
